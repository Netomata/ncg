# $Id$
# Copyright (c) 2008 Netomata, Inc.  All Rights Reserved. 
# Please review accompanying 'LICENSE' file or
# http://www.netomata.com/license_v1 for important notices,
# disclaimers, and license terms (GPL v2.0 or alternative).
#
+ (+) < (...)!interfaces!_v_%{type}
@ (>)!vlan_id = %{id}
@ (vlan_id=%{id})!vlan_ip = [%= \
	ip_union(@target["(...)!base_ip"], \
		"0.0.%{id}.0") \
    %]
@ (vlan_id=%{id})!name = [%= "Vlan" + "%{id}" %]
@ (vlan_id=%{id})!active = %{active}
@ (vlan_id=%{id})!type = %{type}
@ (vlan_id=%{id})!ip = [%= \
	ip_union(@target["(...)!base_ip"], \
		"0.0.%{id}.0", \
		"0.0.0.#{@target["(...)!router_id"].to_i + 1}" \
		) \
    %]
@ (vlan_id=%{id})!netmask = %{netmask}
@ (vlan_id=%{id})!description = [%= \
	if ("%{name}" != "%{description}") then \
	    "%{name} (%{description}) VLAN [%{type}]" \
	else \
	    "%{name} VLAN [%{type}]" \
	end \
    %]
#
% id	active	type	netmask		name		description
# --	------	----	-------		----		-----------
1	yes	admin	255.255.255.0	default		default
# note that in web_hosting.neto file, after this table is imported,
# vlan_ip for VLAN 3 (Lab) is fixed to what it should be (172.24.1.0)
3	yes	admin	255.255.255.0	Lab		Lab Backbone
16	yes	admin	255.255.240.0	Management	Management
32	yes	admin	255.255.240.0	Bulk		Bulk
48	yes	admin	255.255.240.0	IPMI		IPMI
81	yes	env	255.255.255.0	Production	Production
82	yes	env	255.255.255.0	Pre-Prod	Pre-Prod
83	yes	env	255.255.255.0	Demo		Demo
84	yes	env	255.255.255.0	Dev		Dev
85	yes	env	255.255.255.0	QA		QA
86	yes	env	255.255.255.0	Test		Test
128	yes	switch	255.255.255.0	Corporate	Corporate
252	yes	switch	255.255.255.0	ISP-FW		ISP-to-Firewall
253	yes	switch	255.255.255.0	FW-LB		Firewall-to-LoadBal
254	yes	admin	255.255.255.0	LB-Rtr		LoadBal-to-Router
